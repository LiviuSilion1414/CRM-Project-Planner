@page "/calendar"

@inject DialogService DialogService
@inject FetchService<ActivityDto> fs

<RadzenScheduler TItem="ActivityDto"
                 Style="height: 768px;"
                 Data=@_activities
                 
                 StartProperty="@nameof(ActivityDto.StartDate)"
                 EndProperty="@nameof(ActivityDto.EndDate)"
                 TextProperty="@nameof(ActivityDto.Name)"
                 SelectedIndex="2">
    <RadzenDayView />
    <RadzenWeekView />
    <RadzenMultiDayView NumberOfDays="@sliderNumberOfDays" AdvanceDays="@sliderAdvanceDays" />
    <RadzenMonthView />
</RadzenScheduler>

@code {
    private List<ActivityDto> _activities = new();
    private PaginationHelper _pg = new() { Limit = 100, Offset = 0 };

    int sliderNumberOfDays = 2;
    int sliderAdvanceDays = 1;

    protected override async Task OnInitializedAsync()
    {
        await LoadData();
    }

    private async Task LoadData()
    {
        _activities = await fs.GetAll(
            EndpointsNames.ACTIVITY,
            EndpointCrudActions.GET_WITH_PAGINATION,
            _pg.Limit,
            _pg.Offset
        );
    }
}