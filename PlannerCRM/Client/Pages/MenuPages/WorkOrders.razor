@page "/workOrders"

<h3>Workorders</h3>
<PageTitle>Workorders</PageTitle>

<RadzenDataGrid Data="@_workOrders" TItem="@WorkOrderDto" AllowSorting="true" AllowPaging="true" AllowFiltering="true">
    <Columns>
        <RadzenDataGridColumn TItem="@WorkOrderDto" Property="Name" Title="Name" />
        <RadzenDataGridColumn TItem="@WorkOrderDto" Property="StartDate" Title="Start Date" />
        <RadzenDataGridColumn TItem="@WorkOrderDto" Property="EndDate" Title="End Date" />
    </Columns>
</RadzenDataGrid>

@code {
    [Inject] public FetchService<WorkOrderDto> WorkOrderFetchService { get; set; }

    private List<WorkOrderDto> _workOrders = new();
    private PaginationHelper _paginationHelper = new() { Limit = 100, Offset = 0 };

    protected override async Task OnInitializedAsync()
    { 
        _workOrders = await WorkOrderFetchService.GetAll(
            ControllersNames.WORK_ORDER, 
            CrudApiManager.GET_WITH_PAGINATION, 
            _paginationHelper.Limit, 
            _paginationHelper.Offset
        );
    }
}
